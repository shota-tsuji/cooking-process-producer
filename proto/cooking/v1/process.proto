syntax = "proto3";

package cooking.v1;

service ProcessService {
  // Request process data and server calculates step start times
  rpc CalculateProcess(ProcessRequest) returns (ProcessResponse);
}


// Request: Client provides recipes with steps (no start_time yet)
message ProcessRequest {
  repeated Recipe recipes = 1;
}

message Recipe {
  string id = 1;
  repeated Step steps = 2;
}

message Step {
  string id = 1;
  int32 duration_minutes = 2;
  Resource resource = 3;
}

// Resources used in steps
message Resource {
  string id = 1;
}


// Response: Server attaches start_time to each step
message ProcessResponse {
  repeated RecipeWithSchedule recipes = 1;
}

message RecipeWithSchedule {
  string id = 1;
  repeated StepWithSchedule steps = 2;
}

message StepWithSchedule {
  string id = 1;
  int32 duration_minutes = 2;
  Resource resource = 3;
  uint64 start_time = 4;
}